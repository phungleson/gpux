// Copyright 2024 Phung Le Son.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://github.com/phungleson/gpux/blob/main/LICENSE-APACHE
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

use gpui::{
    div, px, BoxShadow, ElementId, IntoElement, ParentElement, RenderOnce, Styled, WindowContext,
};
use gpux_css::box_shadow::box_shadows_str;
use once_cell::sync::OnceCell;
use smallvec::SmallVec;

#[derive(IntoElement)]
pub struct Bulbasaur {
    pub id: ElementId,
}

impl Bulbasaur {
    pub fn new(id: impl Into<ElementId>) -> Self {
        Self { id: id.into() }
    }
}

static BOX_SHADOWS: OnceCell<SmallVec<[BoxShadow; 2]>> = OnceCell::new();

impl RenderOnce for Bulbasaur {
    fn render(self, _cx: &mut WindowContext) -> impl IntoElement {
        let box_shadows = BOX_SHADOWS.get_or_init(|| {
            let color = "#000";
            box_shadows_str(
                format!(
                    r#"
                    78px 6px {color},
                    84px 6px {color},
                    90px 6px {color},
                    72px 12px {color},
                    78px 12px #8beb46,
                    84px 12px #8beb46,
                    90px 12px #8beb46,
                    96px 12px {color},
                    60px 18px {color},
                    66px 18px {color},
                    72px 18px {color},
                    78px 18px #8beb46,
                    84px 18px #8beb46,
                    90px 18px #8beb46,
                    96px 18px {color},
                    48px 24px {color},
                    54px 24px {color},
                    60px 24px #8beb46,
                    66px 24px #8beb46,
                    72px 24px #2d8d22,
                    78px 24px #8beb46,
                    84px 24px #8beb46,
                    90px 24px #2d8d22,
                    96px 24px #8beb46,
                    102px 24px {color},
                    108px 24px {color},
                    24px 30px {color},
                    30px 30px {color},
                    42px 30px {color},
                    48px 30px #8beb46,
                    54px 30px #8beb46,
                    60px 30px #8beb46,
                    66px 30px #2d8d22,
                    72px 30px #2d8d22,
                    78px 30px #8beb46,
                    84px 30px #8beb46,
                    90px 30px #2d8d22,
                    96px 30px #8beb46,
                    102px 30px #8beb46,
                    108px 30px #8beb46,
                    114px 30px {color},
                    18px 36px {color},
                    24px 36px #5ceee1,
                    30px 36px #5ceee1,
                    36px 36px {color},
                    42px 36px {color},
                    48px 36px #8beb46,
                    54px 36px #8beb46,
                    60px 36px #2d8d22,
                    66px 36px #8beb46,
                    72px 36px #2d8d22,
                    78px 36px #8beb46,
                    84px 36px #8beb46,
                    90px 36px #8beb46,
                    96px 36px #2d8d22,
                    102px 36px #8beb46,
                    108px 36px #8beb46,
                    114px 36px #8beb46,
                    120px 36px {color},
                    18px 42px {color},
                    24px 42px #5ceee1,
                    30px 42px #5ceee1,
                    36px 42px #5ceee1,
                    42px 42px {color},
                    48px 42px {color},
                    54px 42px #2d8d22,
                    60px 42px #8beb46,
                    66px 42px #2d8d22,
                    72px 42px #8beb46,
                    78px 42px #8beb46,
                    84px 42px #8beb46,
                    90px 42px #8beb46,
                    96px 42px #8beb46,
                    102px 42px #2d8d22,
                    108px 42px #8beb46,
                    114px 42px #8beb46,
                    120px 42px {color},
                    18px 48px {color},
                    24px 48px #5ceee1,
                    30px 48px #5ceee1,
                    36px 48px #5ceee1,
                    42px 48px #5ceee1,
                    48px 48px #3fc3b5,
                    54px 48px {color},
                    60px 48px #8beb46,
                    66px 48px #2d8d22,
                    72px 48px #8beb46,
                    78px 48px #8beb46,
                    84px 48px #8beb46,
                    90px 48px #8beb46,
                    96px 48px #8beb46,
                    102px 48px #2d8d22,
                    108px 48px #8beb46,
                    114px 48px #8beb46,
                    120px 48px {color},
                    12px 54px {color},
                    18px 54px #5ceee1,
                    24px 54px #5ceee1,
                    30px 54px #3fc3b5,
                    36px 54px #5ceee1,
                    42px 54px #3fc3b5,
                    48px 54px #3fc3b5,
                    54px 54px #5ceee1,
                    60px 54px {color},
                    66px 54px {color},
                    72px 54px {color},
                    78px 54px #8beb46,
                    84px 54px #8beb46,
                    90px 54px #8beb46,
                    96px 54px #8beb46,
                    102px 54px #2d8d22,
                    108px 54px #8beb46,
                    114px 54px {color},
                    6px 60px {color},
                    12px 60px {color},
                    18px 60px #3fc3b5,
                    24px 60px #5ceee1,
                    30px 60px #5ceee1,
                    36px 60px #5ceee1,
                    42px 60px #5ceee1,
                    48px 60px #5ceee1,
                    54px 60px #5ceee1,
                    60px 60px #5ceee1,
                    66px 60px #5ceee1,
                    72px 60px {color},
                    78px 60px #8beb46,
                    84px 60px #8beb46,
                    90px 60px #8beb46,
                    96px 60px {color},
                    102px 60px {color},
                    108px 60px {color},
                    114px 60px {color},
                    6px 66px {color},
                    12px 66px {color},
                    18px 66px #3fc3b5,
                    24px 66px #5ceee1,
                    30px 66px #5ceee1,
                    36px 66px #5ceee1,
                    42px 66px #3fc3b5,
                    48px 66px #5ceee1,
                    54px 66px #5ceee1,
                    60px 66px #5ceee1,
                    66px 66px {color},
                    72px 66px #3fc3b5,
                    78px 66px {color},
                    84px 66px {color},
                    90px 66px {color},
                    96px 66px #3fc3b5,
                    102px 66px #3fc3b5,
                    108px 66px #3fc3b5,
                    114px 66px {color},
                    6px 72px {color},
                    12px 72px #5ceee1,
                    18px 72px #5ceee1,
                    24px 72px #5ceee1,
                    30px 72px #5ceee1,
                    36px 72px #3fc3b5,
                    42px 72px #5ceee1,
                    48px 72px {color},
                    54px 72px {color},
                    60px 72px #5ceee1,
                    66px 72px #3fc3b5,
                    72px 72px #3fc3b5,
                    78px 72px #3fc3b5,
                    84px 72px #3fc3b5,
                    90px 72px #3fc3b5,
                    96px 72px {color},
                    102px 72px #3fc3b5,
                    108px 72px #fdfdf5,
                    114px 72px {color},
                    6px 78px {color},
                    12px 78px #3fc3b5,
                    18px 78px #5ceee1,
                    24px 78px #5ceee1,
                    30px 78px #5ceee1,
                    36px 78px #5ceee1,
                    42px 78px {color},
                    48px 78px #ca242a,
                    54px 78px #fdfdf5,
                    60px 78px #fdfdf5,
                    66px 78px #3fc3b5,
                    72px 78px #3fc3b5,
                    78px 78px {color},
                    84px 78px #3fc3b5,
                    90px 78px #3fc3b5,
                    96px 78px {color},
                    102px 78px {color},
                    108px 78px {color},
                    12px 84px {color},
                    18px 84px #3fc3b5,
                    24px 84px #5ceee1,
                    30px 84px #5ceee1,
                    36px 84px #5ceee1,
                    42px 84px {color},
                    48px 84px #ca242a,
                    54px 84px #fdfdf5,
                    60px 84px #5ceee1,
                    66px 84px #3fc3b5,
                    72px 84px {color},
                    78px 84px #3fc3b5,
                    84px 84px #3fc3b5,
                    90px 84px {color},
                    18px 90px {color},
                    24px 90px {color},
                    30px 90px #3fc3b5,
                    36px 90px #3fc3b5,
                    42px 90px #3fc3b5,
                    48px 90px #3fc3b5,
                    54px 90px #3fc3b5,
                    60px 90px #3fc3b5,
                    66px 90px {color},
                    72px 90px #3fc3b5,
                    78px 90px #3fc3b5,
                    84px 90px #3fc3b5,
                    90px 90px {color},
                    30px 96px {color},
                    36px 96px {color},
                    42px 96px {color},
                    48px 96px {color},
                    54px 96px {color},
                    60px 96px {color},
                    66px 96px {color},
                    72px 96px #fdfdf5,
                    78px 96px #3fc3b5,
                    84px 96px #fdfdf5,
                    90px 96px {color},
                    72px 102px {color},
                    78px 102px {color},
                    84px 102px {color}
                    "#,
                )
                .as_str(),
            )
        });

        div().min_w(px(120.)).min_h(px(102.)).relative().child(
            div()
                .absolute()
                .top(px(-6.))
                .left(px(-6.))
                .size(px(6.))
                .shadow(box_shadows.clone()),
        )
    }
}
